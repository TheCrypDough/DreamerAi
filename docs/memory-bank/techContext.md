# Tech Context\n\n*Last Updated: 2024-07-29 16:00:00*\n\n## Core Technologies\n\n- **Programming Languages:**\n    - Python (Backend: FastAPI, Agents, Core Logic)\n    - JavaScript (Frontend: Electron Main/Renderer, React)\n- **Frameworks/Libraries (Backend - Python):**\n    - FastAPI (Web framework)\n    - Uvicorn (ASGI server)\n    - Pydantic (Data validation)\n    - Loguru (Logging)\n    - SQLite3 (Database - Dev)\n    - Tomllib (TOML parsing)\n    - python-dotenv (Environment variables)\n    - requests, aiohttp, httpx (HTTP clients)\n    - Ollama (Local LLM client)\n    - openai (OpenRouter client)\n    - GitPython (Local Git interaction)\n    - ChromaDB (Vector database)\n    - sentence-transformers, torch (Embeddings for RAG)\n    - websockets (WebSocket server)\n    - keytar (Python binding - *Note: Primarily used via Node.js in main process*)\n    - tenacity, pyyaml, numpy, aiofiles, colorama, black, python-jose[cryptography], cryptography, bleach, cachetools, scikit-learn, pandas, dependency-injector, firebase-admin, psycopg[binary,pool], pip-audit (Supporting/Future Use)\n- **Frameworks/Libraries (Frontend - JS/Node):**\n    - Electron (Desktop application shell)\n    - Node.js (Electron runtime)\n    - React (UI library)\n    - React DOM (React rendering)\n    - Material-UI (MUI) (@mui/material, @emotion/react, @emotion/styled, @mui/lab, @mui/icons-material) (UI components)\n    - @dnd-kit/core (Drag and Drop)\n    - i18next, react-i18next (Internationalization)\n    - keytar (Native module for secure credential storage - Used in Main Process)\n    - ws (WebSocket client - Used by DreamTheatrePanel)\n    - joi (Schema validation - *Usage location TBD*)\n    - intro.js (User onboarding/tutorials - *Usage location TBD*)\n    - posthog-js, firebase (Analytics/Backend Services - *Integration TBD*)\n- **Development Tools:**\n    - VS Code + Cursor AI\n    - Git / GitHub\n    - Python Virtual Environment (venv)\n    - npm (Node package manager)\n    - Electron Forge (Build tool)\n    - Webpack (Module bundler for Electron Forge)\n    - electron-rebuild (Native module compilation)\n    - ESLint (JS/React Linter)\n    - Black (Python Formatter)\n    - PowerShell (Primary Terminal)\n\n## Development Setup\n\n- **OS:** Windows 11 Pro\n- **Primary Workspace:** `C:\DreamerAI\`\n- **Python Env:** Managed via `venv` activated using `.\venv\Scripts\activate`.\n- **Node Env:** Managed via `npm` in the project root (`C:\DreamerAI\`). `package.json` is at the root.\n- **Backend Execution:** Requires running `python -m engine.core.server` or `uvicorn engine.core.server:app --reload --port 8090` from the root directory (`C:\DreamerAI\`) with venv active.\n- **Frontend Execution:** Requires running `npm start` from the project root (`C:\DreamerAI\`).\n- **Local LLM:** Ollama server running locally (typically `http://localhost:11434`) with necessary models pulled (e.g., `gemma3:12b`).\n- **Local RAG DBs:** Located in `C:\DreamerAI\data\rag_dbs\`.\n- **Credentials:**\n    - OpenRouter API Key: Expected in `C:\DreamerAI\data\config\.env.development` as `OPENROUTER_API_KEY`.\n    - GitHub Client ID/Secret: Expected in `.env.development` as `GITHUB_CLIENT_ID` / `GITHUB_CLIENT_SECRET` (loaded by `main.js`).\n    - GitHub Token (runtime): Stored securely in OS keychain via `keytar` by `main.js`.\n\n## Technical Constraints & Considerations\n\n- **Native Modules:** Require `electron-rebuild` to be run after `npm install` or when Electron version changes.\n- **Inter-Process Communication:** Must use Electron's secure IPC mechanisms (`contextBridge`, `ipcMain`/`ipcRenderer`) to pass data between main and renderer processes, especially for sensitive operations.\n- **Secrets Management:** API keys and secrets must not be exposed in renderer process code. Main process handles loading from `.env` and secure storage (`keytar`).\n- **Build Configuration:** Electron Forge expects config files (`forge.config.js`, `webpack.*.js`, `package.json`) at the project root.\n- **Relative Imports (Python Backend):** Running backend scripts often requires `python -m <module.path>` or using `uvicorn` from the root to resolve imports correctly.\n- **Cross-Platform Compatibility:** While developing on Windows, consider potential pathing or native module issues on macOS/Linux (especially `keytar`).\n- **Async Operations:** Heavy use of `async/await` in both Python backend (FastAPI, agent methods) and JS frontend (React hooks, IPC calls, fetch).
